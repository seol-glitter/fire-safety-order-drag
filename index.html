<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>옷에 불이 붙었을 때 대응 – 순서 드래그</title>
<style>
*{box-sizing:border-box}body{margin:0;font-family:system-ui,'Noto Sans KR',sans-serif;background:#f7f7f7;color:#222}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:#fff;border:1px solid #e5e5e5;border-radius:12px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.stage{position:relative;user-select:none;-webkit-user-select:none}
#bg{width:100%;height:auto;display:block;border-radius:8px}
.slot{position:absolute;border:2px dashed #7e7e7e;border-radius:12px;display:flex;align-items:center;justify-content:center;
      color:#444;font-weight:700;background:rgba(255,255,255,.12)}
.cardimg{position:absolute;width:22%;touch-action:none;cursor:grab;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.15)}
.btn{appearance:none;border:1px solid #d0d0d0;background:#fff;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
.top-right{position:absolute;right:12px;top:12px}.hidden{display:none}
.notice{color:#666;font-size:.95rem;margin-top:8px}
.success{border-color:#19a34a;background:rgba(25,163,74,.18)}
</style>
<div class="container"><div class="card">
  <h1>옷에 불이 붙었을 때 대응 – 순서대로 놓기</h1>
  <div class="stage" id="stage">
    <img id="bg" src="assets/bg.jpg" alt="배경">
    <!-- 드롭존(1,2,3) 위치는 퍼센트로 조정 -->
    <div id="slot1" class="slot">1</div>
    <div id="slot2" class="slot">2</div>
    <div id="slot3" class="slot">3</div>
    <!-- 카드(멈춰요, 엎드려요, 굴러요) -->
    <img id="card1" class="cardimg" src="assets/card1.jpg" alt="멈춰요">
    <img id="card2" class="cardimg" src="assets/card2.jpg" alt="엎드려요">
    <img id="card3" class="cardimg" src="assets/card3.jpg" alt="굴러요">
    <button id="home" class="btn top-right hidden">메인으로</button>
    <audio id="ding" src="assets/correct.mp3" preload="auto"></audio>
  </div>
  <p class="notice">※ 드롭존/카드 위치는 스크립트 상단의 <code>SLOTS</code>/<code>STARTS</code>에서 퍼센트로 쉽게 조정할 수 있어요.</p>
</div></div>
<script>
// 배경 이미지 위 퍼센트 좌표 (스크린샷 기준 추정치 → 필요시 수치만 수정하세요)
const SLOTS=[
  {id:'slot1', left:78, top:10, width:16, height:22}, // 숫자 1 위 영역
  {id:'slot2', left:78, top:38, width:16, height:22}, // 숫자 2 위 영역
  {id:'slot3', left:78, top:68, width:16, height:22}  // 숫자 3 위 영역
];
const STARTS=[
  {id:'card1', left:6,  top:10},  // 굴러요 카드 자리 근처로 배치해도 OK
  {id:'card2', left:6,  top:40},
  {id:'card3', left:6,  top:70}
];
// 카드와 슬롯의 정답 매핑
const MAP={ card1:'slot1', card2:'slot2', card3:'slot3' };

const stage=document.getElementById('stage'), bg=document.getElementById('bg');
const ding=document.getElementById('ding'), home=document.getElementById('home');
let placed=new Set();

function pct(v,t){return v/100*t}
function layout(){
  const r=bg.getBoundingClientRect();
  SLOTS.forEach(s=>{
    const el=document.getElementById(s.id);
    el.style.left = pct(s.left,  r.width)+'px';
    el.style.top  = pct(s.top,   r.height)+'px';
    el.style.width= pct(s.width, r.width)+'px';
    el.style.height=pct(s.height,r.height)+'px';
  });
  STARTS.forEach(s=>{
    const el=document.getElementById(s.id);
    el.style.left = pct(s.left,  r.width)+'px';
    el.style.top  = pct(s.top,   r.height)+'px';
  });
}

let drag=null, ox=0, oy=0;
function point(e){return e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}
function down(e){drag=e.currentTarget; const p=point(e), r=drag.getBoundingClientRect(); ox=p.x-r.left; oy=p.y-r.top; drag.style.cursor='grabbing'}
function move(e){if(!drag)return; const p=point(e), r=bg.getBoundingClientRect(); drag.style.left=(p.x-r.left-ox)+'px'; drag.style.top=(p.y-r.top-oy)+'px'}
function up(){
  if(!drag) return;
  const target = MAP[drag.id];
  const a = drag.getBoundingClientRect();
  const b = document.getElementById(target).getBoundingClientRect();
  if(a.left<b.right && a.right>b.left && a.top<b.bottom && a.bottom>b.top){
    // 스냅
    drag.style.left = (b.left - bg.getBoundingClientRect().left)+'px';
    drag.style.top  = (b.top  - bg.getBoundingClientRect().top)+'px';
    document.getElementById(target).classList.add('success');
    try{ ding.currentTime=0; ding.play(); }catch(e){}
    placed.add(drag.id);
    if(placed.size===3){ home.classList.remove('hidden'); }
  }
  drag.style.cursor='grab';
  drag=null;
}

['card1','card2','card3'].forEach(id=>{
  const el=document.getElementById(id);
  el.addEventListener('mousedown',down);
  window.addEventListener('mousemove',move);
  window.addEventListener('mouseup',up);
  el.addEventListener('touchstart',e=>{e.preventDefault();down(e)});
  window.addEventListener('touchmove',e=>{e.preventDefault();move(e)},{passive:false});
  window.addEventListener('touchend',up);
});
window.addEventListener('resize',layout);
bg.addEventListener('load',layout);
layout();
home.onclick=()=>location.href='index.html';
</script>
